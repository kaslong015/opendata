{% extends 'base.html'%}
{% block title %}datail page{% endblock title %}

{% load static %}


{%block content%}
    <div class="container-scroller">
      <!-- partial:partials/_sidebar.html -->
      {% include 'sidebar.html' %}
      <!-- partial -->
      <div class="container-fluid page-body-wrapper">
        <!-- partial:partials/_navbar.html -->
        {% include 'navbar.html' %}
        <!-- partial -->
        <div class="main-panel">
          <div class="content-wrapper">
            
            <div class="row ">
              <div class="col-12 grid-margin">
                <div class="card">
                  <div class="card-body">
                    <h4 class="card-title">Valid Licenses Info</h4>
                    <div class="row">
                      <div class="col-md-6">
                        <address>
                          <p class="font-weight-bold">
                            Name: <span style="font-weight: 100;">{{license.name}}</span>
                          </p>
                          <br>
                          <p class="font-weight-bold">
                            Code: <span style="font-weight: 100;">{{license.code}}</span>
                          </p>
                          <br>
                          <p class="font-weight-bold">
                            Holder: <span style="font-weight: 100;">{{license.holder}}</span>
                          </p>
                          <br>
                          <p class="font-weight-bold">
                            Type: <span style="font-weight: 100;">{{license.type}}</span>
                          </p>
                          <br>
                          <p class="font-weight-bold">
                            Status: <span style="font-weight: 100;">{{license.status}}</span>
                          </p>
                          <br>
                          <p class="font-weight-bold">
                            Core Id : <span style="font-weight: 100;">{{license.core_id}}</span>
                          </p>
                          <br>
                          <p class="font-weight-bold">
                            Cadastral Unit: <span style="font-weight: 100;">{{license.cadastral_unit}} (CU)</span>
                          </p>
                          <br>
                          <p class="font-weight-bold">
                            Granted Date: <span style="font-weight: 100;">{{license.grant_date}}</span>
                          </p>
                          <br>
                          <p class="font-weight-bold">
                            Expiry Date: <span style="font-weight: 100;">{{license.expiry_date}}</span>
                          </p>
                          <br>
                          <a href="javascript:history.go(-1)" class="btn btn-primary">back</a> 
                        </address>
                      </div>
                      <div class="col-md-6"> 
                        <div id="map" ></div>                                          
                      </div>                      
                    </div>
                  </div>
                </div>
              </div>
            </div>         
            
          </div>
          <!-- content-wrapper ends -->
          <!-- partial:partials/_footer.html -->
          <footer class="footer">
            <div class="d-sm-flex justify-content-center justify-content-sm-between">
              <span class="text-muted d-block text-center text-sm-left d-sm-inline-block">Copyright Â©  2020</span>
              <span class="float-none float-sm-right d-block mt-1 mt-sm-0 text-center"><a href="#" target="_blank">dorogis</a></span>
            </div>
          </footer>
          <!-- partial -->
        </div>
        <!-- main-panel ends -->
      </div>
      <!-- page-body-wrapper ends -->
    </div>
    <!-- container-scroller -->
   {% endblock content%}
   {% block js %}
    <!-- Leaflet.js JavaScript -->
    <script src="https://unpkg.com/leaflet/dist/leaflet.js"></script>
    <script>
         var map = L.map('map').setView([10.14, 9.5], 12);

          // Add OpenStreetMap tile layer
          L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
              maxZoom: 18,
              attribution: '&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors'
          }).addTo(map);



          const coordinates = [
            { lat: 10.1125, lng: 9.4625 },
            { lat: 10.1125, lng: 9.5167 },
            { lat: 10.1208, lng: 9.5167 },
            { lat: 10.1208, lng: 9.5875 },
            { lat: 10.1583, lng: 9.5875 },
            { lat: 10.1583, lng: 9.55 },
            { lat: 10.1708, lng: 9.55 },
            { lat: 10.1708, lng: 9.4625 }
        ];

        // Step 4: Convert to an array format Leaflet can read (an array of [lat, lng] pairs)
        const latLngs = coordinates.map(coord => [coord.lat, coord.lng]);

        // Step 5: Create the polygon and add it to the map
        const polygon = L.polygon(latLngs, {
            color: 'blue',     // Polygon color
            fillColor: '#3388ff',
            fillOpacity: 0.5
        }).addTo(map);



          const myVariable = "{{ cords }}";
          
          // Define the coordinates for the polygon
        
          var latlngs = [
           
          ];

          console.log(latlngs)

          // Create and add the polygon to the map
          // var polygon = L.polygon(latlngs, { color: 'green', fillColor: '#33ff88', fillOpacity: 0.5 });
          polygon.addTo(map);

          // Calculate the center of the polygon to place the text
          var center = polygon.getBounds().getCenter();

          // Add a marker with text at the center of the polygon
          L.marker(center).addTo(map)
              .bindTooltip("EL-059788", { permanent: true, className: "leaflet-tooltip-text", offset: [0, 0] })
              .openTooltip();

          // Adjust the map view to fit the polygon bounds
          map.fitBounds(polygon.getBounds());
    </script>
  {% endblock js %} 